<div class="container-fluid bottom-gutter">
  <h3>Grammatika</h3>
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore
    magna aliqua. Ut enim ad minim veniam, quis nostrud.</p>
    <form class="col-12" [formGroup]="form">
        <div class="row">
          <b class="pr-2">Keeleõppija:</b>
          <div class="custom-control custom-radio pr-4">
            <input formControlName="list" type="radio" id="customRadio1" value="noor" (click)="getChildData()"
                   class="custom-control-input">
            <label class="custom-control-label" for="customRadio1">noor keeleõppija <span
              class="alert-icn"></span></label>
          </div>
          <div class="custom-control custom-radio">
            <input formControlName="list" type="radio" id="customRadio2" (click)="getAdultData()"
                   class="custom-control-input" value="etLex" disabled>
            <label class="custom-control-label" for="customRadio2">täiskasvanu</label>
          </div>
        </div>
        <div class="row">
          <b class="pr-2">Keeletase:</b>
          <div formArrayName="lang" *ngFor="let lang of form.controls.lang.controls; let i = index">
            <div class="custom-control custom-checkbox pb-2 pr-3">
              <input class="custom-control-input" type="checkbox" [formControlName]="i" [id]="i">
              <label class="color-{{langLevel[i]}} custom-control-label" [for]="i">
                {{langLevel[i]}}
              </label>
            </div>
          </div>
        </div>
      <div class="row">
        <div class="form-group">
          <label for="exampleFormControlSelect1">Peakategooria</label>
          <select class="form-control" id="exampleFormControlSelect1" formControlName="maincategory"
                  (change)="getChildValues(form.value.maincategory)">
            <option value="" hidden>Kõik peakategooriad</option>
            <option *ngFor="let category of categoriesList">{{category.name}}</option>
          </select>
        </div>
        <div class="form-group">
          <label for="exampleFormControlSelect2">Kõik alamkategooriad</label>
          <select class="form-control" id="exampleFormControlSelect2" formControlName="subcategory"
                  (change)="getTypeValues(form.value.subcategory)">
            <option value="" hidden>Kõik alamkategooriad</option>
            <option *ngFor="let category of childCatList" value="{{category.category}}">{{category.name}}</option>
          </select>
        </div>
        <div *ngIf="typeList" class="form-group pt-4">
          <select class="form-control mt-2" formControlName="descriptor"
                  (change)="getTypes(form.value.descriptor)" >
            <option value="" hidden>Tunnus</option>
            <option *ngFor="let type of typeList.descriptors" value="{{type}}">{{type}}</option>
          </select>
        </div>
        <div *ngIf="valTypeList" class="form-group pt-4">
          <select class="form-control mt-2" formControlName="values">
            <option value="" hidden>Tunnuse liik</option>
            <option *ngFor="let type of valTypeList.values" value="{{type}}">{{type}}</option>
          </select>
        </div>
        <div class="pl-4 button-padding">
          <i class="fa fa-plus plus"></i>
          <button class="btn btn-submit ml-2" (click)="sendData()">Otsi</button>
        </div>
      </div>
    </form>
    <div class="col-8">
      <b>Otsingu tulemused ( <span>{{itemsCount}}</span> )</b>
      <div class="float-right">
        <a class="pr-2">PDF</a>
        <label for="select">Näita</label>
        <select id="select" class="custom-select select" name="pageSize" [(ngModel)]="pageSize">
          <option [ngValue]="2">2</option>
          <option [ngValue]="4">4</option>
          <option [ngValue]="6">6</option>
        </select>
      </div>
      <table class="table table-striped">
        <thead>
        <tr>
          <th scope="col" sortable="maincategory_name" (sort)="onSort($event)">Peakategooria</th>
          <th scope="col" sortable="subcategory_name" (sort)="onSort($event)">Alamkategooria</th>
          <th scope="col" sortable="langlevel" (sort)="onSort($event)">Keeletase</th>
          <th scope="col" sortable="level" (sort)="onSort($event)">Kirjeldus</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let item of words$ | async">
          <td>
            <ngb-highlight [result]="item.maincategory_name"></ngb-highlight>
          </td>
          <td>
            <ngb-highlight [result]="item.subcategory_name"></ngb-highlight>
          </td>
          <td>
            <ngb-highlight class="color-{{item.langlevel}}" [result]="item.langlevel"></ngb-highlight>
          </td>
          <td>
            <ngb-highlight  [result]="item.can_do_statement"></ngb-highlight>
            <div *ngFor="let obj of item.descriptors | keys">
              <span class="features" >TUNNUSED</span> {{obj.descriptor}} {{obj.values}}
            </div>
          </td>
          <td>
            <ngb-highlight result="Lisainfo"></ngb-highlight>
          </td>
        </tr>
        </tbody>
      </table>
      <div>
        <ngb-pagination [collectionSize]="total$ | async" [(page)]="page" [pageSize]="pageSize">
          <ng-template ngbPaginationPrevious>Eelmine</ng-template>
          <ng-template ngbPaginationNext>Järgmine</ng-template>
        </ngb-pagination>
      </div>
    </div>
</div>

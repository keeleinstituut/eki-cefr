<div class="container-fluid bottom-gutter content-panel">
  <div class="row">
    <div class="col-12">
      <h3>Teksti sõnavara hindamine</h3>
    </div>
    <div class="col-8 pr-4">
      <p>Teksti sõnavara hindamise programm analüüsib tekste sõnavara loendite põhjal ning näitab, mis keeleoskustaseme
        sõnavara tekst sisaldab.
      </p>
    </div>
    <div class="col-4">
      <button class="btn btn-submit float-right" (click)="modal.open()">Tagasiside</button>
    </div>
  </div>
  <form [formGroup]="form">
    <div class="row pt-4 pb-4">
      <div class="col-6">
        <b>Keeleõppija:</b>
        <div class="custom-control custom-radio">
          <input type="radio" id="customRadio1" name="list" class="custom-control-input"
                 formControlName="list" value="noor">
          <label class="custom-control-label" for="customRadio1">noor keeleõppija <span
            class="alert-icn"></span></label>
        </div>
        <div class="custom-control custom-radio">
          <input type="radio" id="customRadio2" name="list" class="custom-control-input"
                 formControlName="list" value="etLex">
          <label class="custom-control-label" for="customRadio2">täiskasvanu</label>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-5">
        <div class="form-group">
          <label for="exampleFormControlTextarea1"><b>Sisesta tekst:</b></label>
          <textarea autosize class="form-control" formControlName="text" id="exampleFormControlTextarea1" rows="8"
                    maxlength="2000"></textarea>
          <small class="counter">{{this.form.controls.text.value.length}}/2000</small>
        </div>
      </div>
      <div class="col-4">
        <div class="form-group">
          <div class="row">
            <label for="exampleFormControlTextarea2"><b>Keeletase:</b></label>

            <div formArrayName="lang" *ngFor="let lang of form.controls.lang.controls; let i = index">
              <div class="custom-control custom-checkbox pr-2">
                <input class="custom-control-input" type="checkbox" [formControlName]="i"
                       [id]="i" (change)="wordColor(levels[i], lang.value)">
                <label class="color-{{levels[i]}} custom-control-label" [for]="i">
                  {{levels[i]}}
                </label>
              </div>
            </div>
          </div>
          <div class="row text-bg-white">
            <div class="pr-2" id="exampleFormControlTextarea2" *ngFor="let word of this.resultData; let i = index">
              <p [ngClass]="colors(word.level)" ngbPopover="{{word.pos_text}}"
                 triggers="mouseenter:mouseleave" placement="top">{{word.token}}</p>
            </div>
          </div>
        </div>
      </div>
      <div class="col ml-4 mr-4 rating-table">
        Sõnu kokku: {{wordCount}}
        <div class="row table-border m-0">
          <div class="col-4 pl-0">
            Keeletase
          </div>
          <div class="col-4 pl-0">
            Sõnu
          </div>
          <div class="col-4 pl-0">
            %
          </div>
        </div>
        <div class="row" *ngFor="let item of smTable">
          <div class="col-4">
            {{item.label}}
          </div>
          <div class="col-4">
            {{item.count}}
          </div>
          <div class="col-4 pl-0">
            {{item.percentage}}
          </div>
        </div>
      </div>
    </div>
    <button class="btn btn-submit" (click)="getData()">Hinda</button>
  </form>
  <app-feedback-modal></app-feedback-modal>
</div>
